# Tennis Bracket Sweepstakes Generator

This is a complete system for creating, managing, and scoring a tennis tournament bracket sweepstakes for a group of friends. The system is built around a set of Python scripts that generate an interactive HTML bracket, score predictions, and create a master viewer to compare all brackets against the actual results.

## File Structure

Your project folder should be set up like this for everything to work correctly:



/tennis_sweepstakes/
|-- setup_bracket.py
|-- score_manager.py
|-- generate_viewer.py
|-- entrants.txt
|-- all_brackets/
| |-- roberto_predictions.csv
| |-- alice_predictions.csv
| |-- bob_predictions.csv
| |-- actual_results_predictions.csv
| |-- index.html <-- This will be generated by the viewer script
---

## The Workflow: Step-by-Step Guide

### Step 1: Initial Setup (Administrator)

This is a one-time setup you do at the start of each tournament.

1.  **Prepare `entrants.txt`:**
    * This file is the single source of truth for the tournament's Round of 32 matchups.
    * Open `entrants.txt` and list all 16 matches for the Men's Draw and all 16 for the Women's Draw under their respective `mens` and `womens` headers.
    * **Format:** `(SEED) Player One vs (SEED) Player Two`. The seed is optional.
    * **Example:**
        ```
        mens
        (1) Jannik Sinner vs (32) Matteo Arnaldi
        (WC) Andy Murray vs Stan Wawrinka
        ...
        womens
        (1) Iga Swiatek vs (28) Linda Noskova
        ...
        ```

2.  **Generate the Interactive Bracket:**
    * Open your terminal in the project directory.
    * Run the setup script:
        ```bash
        python3 setup_bracket.py
        ```
    * This will create two files: `bracket.html` and an empty `actual_results.csv`.

3.  **Distribute the Bracket:**
    * Send the newly created `bracket.html` file to all your friends who are participating.

#### **NEW: Running Multiple Sweepstakes (Changing the Google Form)**

If you want to run a new sweepstakes for a different tournament, you must link the system to a new Google Form to keep the results separate.

1.  **Create a New Google Form:** Make a new form with two "Short answer" questions (e.g., "Name" and "Prediction Data").
2.  **Get the Pre-filled Link:**
    * In the form editor, click the three-dots menu and select **"Get pre-filled link"**.
    * Type a placeholder value into each field (e.g., `TESTNAME` and `TESTDATA`).
    * Click **"Get link"**, then **"COPY LINK"**.
3.  **Update the Script:**
    * Open the `setup_bracket.py` script in a text editor.
    * Find the `google_form_config` dictionary near the top of the file.
    * Paste your new pre-filled link and extract the new `base_url`, `name_entry`, and `data_entry` values.
    * Update the dictionary with these new values. **The `base_url` must end in `/formResponse`**.
    * **Example of what to edit in `setup_bracket.py`:**
        ```python
        google_form_config = {
            "action_url": "[https://docs.google.com/forms/d/e/NEW_FORM_ID_HERE/formResponse](https://docs.google.com/forms/d/e/NEW_FORM_ID_HERE/formResponse)",
            "name_entry": "entry.NEW_NAME_ID_HERE",
            "data_entry": "entry.NEW_DATA_ID_HERE"
        }
        ```
4.  **Save the script** and then run `python3 setup_bracket.py` to generate the new `bracket.html` linked to your new form.

### Step 2: Collecting Predictions (Participants & Administrator)

1.  **Participants Fill Out Bracket:**
    * Each friend opens the `bracket.html` file in their web browser (Chrome or Safari are recommended).
    * They click through the rounds to select their predicted winner for every match.
    * Once the bracket is complete, they click the **"Lock In & Review Bracket"** button.
    * They will be prompted to enter their name.
    * They are then shown a static "receipt" of their picks.

2.  **Participants Submit:**
    * On the static review page, they click the **"Submit My Bracket"** button.
    * This opens a new tab with your pre-configured Google Form, which will be submitted automatically.

3.  **Administrator Collects Data:**
    * Open the Google Sheet that is linked to your Google Form.
    * Each submission will appear as a new row. Copy the data from the "Prediction Data" column for each person and save it as a `.csv` file in your `all_brackets` folder (e.g., `roberto_predictions.csv`, `alice_predictions.csv`). **Crucially, make sure the first line of each file is the header:** `Category,Round,MatchID,PredictedWinner`.

### Step 3: Scoring the Sweepstakes (Administrator)

1.  **Fill Out the Master Bracket:**
    * As the tournament progresses, you, the administrator, need to create the "answer key".
    * Open a clean copy of `bracket.html`.
    * Fill it out with the **actual results** of the matches.
    * Click "Lock In & Review" and enter the name `actual_results`.
    * Submit the bracket to the Google Form.
    * Go to your results spreadsheet, copy the data, and save it as `actual_results_predictions.csv` inside your `all_brackets` folder.

2.  **Check Scores:**
    * You can check individual scores or generate a full scoreboard at any time.
    * **Single Score:**
        ```bash
        python3 score_manager.py -s ./all_brackets/roberto_predictions.csv
        ```
    * **Full Scoreboard:**
        ```bash
        python3 score_manager.py -b ./all_brackets
        ```

### Step 4: Generating and Sharing the Master Viewer

This is the final step, where you create the shared dashboard for everyone to see.

1.  **Generate the Viewer:**
    * Make sure your `all_brackets` folder contains all the prediction files and the `actual_results_predictions.csv` file.
    * Run the `generate_viewer.py` script from your terminal:
        ```bash
        python3 generate_viewer.py -b ./all_brackets -e entrants.txt
        ```
    * This will create a single `index.html` file inside your `all_brackets` folder.

2.  **Share the Results:**
    * Go to **https://app.netlify.com/drop**.
    * Drag and drop your entire `all_brackets` folder onto the page.
    * Netlify will upload the folder and give you a unique, private link (e.g., `https://some-random-name.netlify.app`).
    * Share that link with your friends! They can now view all the brackets and compare them against the actual results.

3.  **Updating the Viewer:**
    * To update the scores after a new round, simply update your `actual_results_predictions.csv` file, re-run the `generate_viewer.py` script, and re-upload the `all_brackets` folder to Netlify. The link will remain the same.



